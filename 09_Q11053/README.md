# ìµœì í™” ë°©ë²•ë¡  (not dp)

ìœ„ì˜ ë°©ë²•ì„ í™œìš©í•˜ë©´ ë§¤ ì´í„°ë ˆì´ì…˜ë§ˆë‹¤ ì ‘ê·¼í•˜ê²Œ ë˜ëŠ” ë¶€ë¶„ë¬¸ì œì˜ ìˆ˜ê°€ Nê°œê°€ ëœë‹¤. ë§Œì•½ ì´ë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤ë©´? ìš°ë¦¬ëŠ” ê³ ì •ëœ ê¸¸ì´ iì—ì„œì˜ LISì˜ ê¸¸ì´ë¥¼ ê°€ì§€ê³ ëŠ” ìˆìœ¼ë‚˜, ê·¸ê²ƒ ë§ê³ ëŠ” ì €ì¥í•˜ê³  ìˆëŠ” ì •ë³´ê°€ ì—†ë‹¤. ë”°ë¼ì„œ ì¡°ê¸ˆ ë” ì˜ë¦¬í•˜ê²Œ ë¬¸ì œë¥¼ í’€ê¸° ìœ„í•´ì„  dpì˜ ì •ì˜ì˜€ë˜ **ë¶€ë¶„ë¬¸ì œì˜ ìœ ì¼ì„±** ì„ í¬ê¸° í•˜ê³ ì„œë¼ë„ ìºì‹œë¥¼ ë§ ê·¸ëŒ€ë¡œ ë™ì ìœ¼ë¡œ í™œìš©í•´ì•¼ í•œë‹¤.

[ê°€ì¥ ê¸´ ì¦ê°€í•˜ëŠ” ë¶€ë¶„ ìˆ˜ì—´ (Longest Increasing Subsequence)](https://seungkwan.tistory.com/8)

> ğŸ’¡ cache[i] = i ê¸¸ì´ ì¦ê°€ìˆ˜ì—´ì˜ ë§ˆì§€ë§‰ ì›ì†Œ ì¤‘ ê°€ì¥ ì‘ì€ ê°’ì„ ê°€ë¦¬í‚¤ëŠ” ì¸ë±ìŠ¤

```cpp
int efficient_lis(const vector<int>& seq)
{
    int L = 0, newL;
    memset(cache, 0, sizeof(cache));

    // cache[0]ì€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ì—¼ë‘í•˜ì„¸ìš”.
    for(size_t i = 0; i < seq.size(); i++)
    {
        // seq[i] > seq[m[j]]ë¥¼ ë§Œì¡±í•˜ëŠ” ê°€ì¥ í° jë¥¼ ì°¾ëŠ”ë‹¤.
        int lo=1, hi=L;
        while (lo<=hi)
        {
            int mid = (lo+hi) / 2;
            if (seq[i] > seq[cache[mid]])
                lo = mid+1;
            else
                hi = mid-1;
        }
        newL = lo;
        cache[newL] = i;
        if (newL > L)
            L = newL;
    }

    return L;
}
```

ìœ„í‚¤í”¼ë””ì•„ì˜ ì½”ë“œì™€ seungkwan ë‹˜ì˜ ì½”ë“œë¥¼ ì ë‹¹íˆ ì„ì–´ì„œ ì½”ë“œë¥¼ ì‘ì„±í•´ ë³´ì•˜ë‹¤. ìœ„í‚¤í”¼ë””ì•„ì˜ ê²½ìš° cache ë°°ì—´ì— seqì˜ ì¸ë±ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ê²Œ ë§Œë“¤ì–´ì„œ í•´ì„í•˜ê¸° ë§¤ìš° ì–´ë ¤ì› ë‹¤. í•˜ì§€ë§Œ lower boundë¥¼ ì°¾ëŠ” ê³¼ì •ì´ ë“œëŸ¬ë‚˜ìˆì–´ì„œ ë„ì›€ì´ ë˜ì—ˆë‹¤.

ê²°êµ­ ì½”ë“œì˜ ëª©í‘œëŠ” seq[cache] ë°°ì—´ì„ ê³„ì† ì •ë ¬ëœ ìƒíƒœë¡œ ë§Œë“œëŠ” ê²ƒì´ë‹¤. ë§¤ ië§ˆë‹¤ seq[cache] ë°°ì—´ì˜ seq[i]ì— ëŒ€í•œ lower boundë¥¼ ì´ì§„íƒìƒ‰ìœ¼ë¡œ ì°¾ì•„ ë‹¤ìŒ ë‘ ê°€ì§€ í–‰ë™ ì¤‘ í•˜ë‚˜ë¥¼ ìˆ˜í–‰í•˜ê²Œ ëœë‹¤.

1. cache ì›ì†Œì™€ êµì²´í•œë‹¤.
2. cache ë§¨ ë’¤ì— ië¥¼ ì¶”ê°€í•œë‹¤.

i ìˆœíšŒê°€ ì™„ë£Œë˜ê³ ë‚˜ë©´ í˜„ì¬ seq ë°°ì—´ì˜ ë§ˆì§€ë§‰ ê°’ì„ ê°€ë¦¬í‚¤ê³  ìˆëŠ” Lì´ ê³§ LISì˜ ê¸¸ì´ê°€ ëœë‹¤.

ì•„ë˜ëŠ” ì„ì˜ì˜ seq : [2,10,6,14,1,9,15,13]ì— ëŒ€í•œ cacheê°€ ê°€ì§€ëŠ” ê°’ì˜ ë³€í™”ì— ëŒ€í•œ ê¸°ë¡ì´ë‹¤.

| i | seq | seq[cache[1..N]] | L |
| --- | --- | --- | --- |
| 0 | 2 | 2 | 1 |
| 1 | 10 | 2, 10 | 2 |
| 2 | 6 | 2, 6 | 2 |
| 3 | 14 | 2, 6, 14 | 3 |
| 4 | 1 | 1, 6, 14 | 0 |
| 5 | 9 | 1, 6, 9 | 3 |
| 6 | 15 | 1, 6, 9, 15 | 4 |
| 7 | 13 | 1, 6, 9, 13 | 4 |

# Pseudocode with python

C++ì— `std::lower_bound`ê°€ ìˆë‹¤ë©´ Pythonì—ëŠ” [`bisect.bisect_left`](https://docs.python.org/3/library/bisect.html#bisect.bisect_left)ê°€ ìˆë‹¤.

```python
from bisect import bisect_left


def length_of_lis(nums: list):
    """lower boundë¥¼ í™œìš©í•œ íš¨ìœ¨ì ì¸ ìºì‹œ ê²€ìƒ‰"""
    cache = []

    for num in nums:
        newL = bisect_left(cache, num)
        if len(cache) == newL:
            cache.append(num)
        else:
            cache[newL] = num

    return len(cache)


assert 5 == length_of_lis([1, 2, 3, 4, 5])
assert 1 == length_of_lis([5, 4, 3, 2, 1])
assert 4 == length_of_lis([10, 9, 2, 5, 3, 7, 101, 18])
assert 2 == length_of_lis([4, 5, 2, 3, 1, 2])
assert 4 == length_of_lis([2, 10, 6, 14, 1, 9, 15, 13])
```
